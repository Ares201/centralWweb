import{e as L,r as c,C as P,j as g,D as k,E as C,G as v,H as y,I as u,J as S,T as p,K as T}from"./BpcgenFr.js";import{c as x}from"./V1Gf8qIK.js";const b=()=>{const{$db:o}=L(),s=c([]),m=c(!0),r=async()=>{try{const t=await C(v(o,"projects"));s.value=t.docs.map(e=>{const a=e.data();return{id:e.id,title:a.title,description:a.description,type:a.type,status:a.status,downloadLink:a.downloadLink,imageUrl:a.imageUrl,views:a.views||0,createdAt:a.createdAt.toDate(),updatedAt:a.updatedAt.toDate()}})}catch(t){console.error("Error loading projects:",t)}finally{m.value=!1}};P(r);const n=c(""),d=c("all"),l=c("all"),j=g(()=>s.value.filter(t=>{const e=t.title.toLowerCase().includes(n.value.toLowerCase())||t.description.toLowerCase().includes(n.value.toLowerCase()),a=d.value==="all"||t.type===d.value,i=l.value==="all"||t.status===l.value;return e&&a&&i})),h=async t=>{await T(v(o,"projects"),{...t,views:0,createdAt:p.now(),updatedAt:p.now()}),await r()},w=async(t,e)=>{await y(u(o,"projects",t),{...e,updatedAt:p.now()}),await r()},f=async t=>{await S(u(o,"projects",t)),s.value=s.value.filter(e=>e.id!==t)},D=(t,e)=>w(t,{status:e}),A=async t=>{const e=s.value.find(i=>i.id===t);if(!e)return;const a=e.views+1;await y(u(o,"projects",t),{views:a}),e.views=a};return{projects:k(s),filteredProjects:j,searchQuery:n,selectedType:d,selectedStatus:l,addProject:h,updateProject:w,deleteProject:f,updateProjectStatus:D,incrementViews:A}};const E=x("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);export{E as D,b as u};
