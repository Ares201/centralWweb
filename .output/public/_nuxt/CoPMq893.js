import{e as A,r as n,C as L,j as P,D as g,E as C,G as k,H as w,I as r,J as S,T as p,K as V}from"./DvgohhIM.js";import{c as x}from"./-Cp2OHgU.js";const E=()=>{const{$db:s}=A(),o=n([]),y=n(!0),d=async()=>{try{const t=await C(k(s,"projects"));o.value=t.docs.map(e=>{const a=e.data();return{id:e.id,title:a.title,description:a.description,type:a.type,status:a.status,downloadLink:a.downloadLink,imageUrl:a.imageUrl,dowload:a.dowload||0,viewsTiktok:a.viewsTiktok||0,createdAt:a.createdAt.toDate(),updatedAt:a.updatedAt.toDate()}})}catch(t){console.error("Error loading projects:",t)}finally{y.value=!1}};L(d);const i=n(""),l=n("all"),u=n("all"),m=P(()=>o.value.filter(t=>{const e=t.title.toLowerCase().includes(i.value.toLowerCase())||t.description.toLowerCase().includes(i.value.toLowerCase()),a=l.value==="all"||t.type===l.value,c=u.value==="all"||t.status===u.value;return e&&a&&c})),j=async t=>{await V(k(s,"projects"),{...t,dowload:0,viewsTiktok:0,createdAt:p.now(),updatedAt:p.now()}),await d()},v=async(t,e)=>{await w(r(s,"projects",t),{...e,updatedAt:p.now()}),await d()},f=async t=>{await S(r(s,"projects",t)),o.value=o.value.filter(e=>e.id!==t)},h=(t,e)=>v(t,{status:e}),T=async t=>{const e=o.value.find(c=>c.id===t);if(!e)return;const a=e.dowload+1;await w(r(s,"projects",t),{dowload:a}),e.dowload=a},D=async t=>{const e=o.value.find(c=>c.id===t);if(!e)return;const a=e.viewsTiktok+1;await w(r(s,"projects",t),{viewsTiktok:a}),e.viewsTiktok=a};return{projects:g(o),filteredProjects:m,searchQuery:i,selectedType:l,selectedStatus:u,addProject:j,updateProject:v,deleteProject:f,updateProjectStatus:h,incrementViews:T,incrementViewsTiktok:D}};const H=x("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);export{H as D,E as u};
