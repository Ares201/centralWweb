import{_ as h}from"./pekGv_iB.js";import{g as w,e as _,r as l,A as C,B as V,z as v,c as b,a as r,t as i,q as A,k as B,v as c,x as p,b as N,w as T,o as y,d as q,y as M,T as f,C as S,_ as z}from"./BHJO8Hug.js";import{u as D,a as x}from"./CDoJ9kcQ.js";const U={class:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-8"},j={class:"w-full max-w-sm px-4"},L={class:"text-center mb-8"},I={class:"text-2xl font-light text-gray-800 dark:text-gray-200"},P={class:"text-sm text-gray-500 dark:text-gray-400 mt-2"},E=["placeholder"],H={key:0},R={type:"submit",class:"w-full py-3 mt-2 text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"},$={class:"text-center mt-8"},F=w({__name:"login",setup(G){const{$db:g}=_(),n=l(""),s=l(""),u=l(""),o=l(!1),m=l([]);C(async()=>{const a=await V(v(g,"users"));m.value=a.docs.map(e=>e.data())});const k=async()=>{if(o.value){if(s.value!==u.value){alert("Las contraseñas no coinciden");return}await M(v(g,"users"),{username:n.value,password:s.value,role:"user",createdAt:f.now(),updatedAt:f.now()}),alert("Cuenta creada correctamente"),o.value=!1,u.value="",n.value="",s.value=""}else{const a=m.value.find(e=>e.username===n.value&&e.password===s.value);if(a){const e=D("user",()=>null);e.value={username:a.username,role:a.role};const d=x("role",{path:"/",maxAge:3600*24*7});d.value=a.role;const t=x("user",{path:"/",maxAge:3600*24*7});t.value=a.username,S("/")}else alert("Usuario o contraseña incorrectos")}};return(a,e)=>{const d=h;return y(),b("div",U,[r("div",j,[r("div",L,[e[3]||(e[3]=r("div",{class:"inline-block p-3 bg-gray-100 dark:bg-gray-800 rounded-full mb-4"},[r("svg",{class:"w-8 h-8 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),r("h1",I,i(o.value?"Crear cuenta":"Iniciar sesión"),1),r("p",P,i(o.value?"Comienza tu experiencia":"Bienvenido de nuevo"),1)]),r("form",{class:"space-y-5",onSubmit:A(k,["prevent"])},[r("div",null,[c(r("input",{id:"username","onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t),type:"text",required:"",placeholder:"Nombre de usuario",class:"w-full px-4 py-3 text-gray-700 dark:text-gray-300 bg-transparent border-b border-gray-300 dark:border-gray-600 focus:border-blue-500 dark:focus:border-blue-400 focus:outline-none placeholder-gray-400 dark:placeholder-gray-500 transition-colors"},null,512),[[p,n.value]])]),r("div",null,[c(r("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=t=>s.value=t),type:"password",required:"",placeholder:o.value?"Crear contraseña":"Tu contraseña",class:"w-full px-4 py-3 text-gray-700 dark:text-gray-300 bg-transparent border-b border-gray-300 dark:border-gray-600 focus:border-blue-500 dark:focus:border-blue-400 focus:outline-none placeholder-gray-400 dark:placeholder-gray-500 transition-colors"},null,8,E),[[p,s.value]])]),o.value?(y(),b("div",H,[c(r("input",{id:"confirmPassword","onUpdate:modelValue":e[2]||(e[2]=t=>u.value=t),type:"password",required:"",placeholder:"Confirmar contraseña",class:"w-full px-4 py-3 text-gray-700 dark:text-gray-300 bg-transparent border-b border-gray-300 dark:border-gray-600 focus:border-blue-500 dark:focus:border-blue-400 focus:outline-none placeholder-gray-400 dark:placeholder-gray-500 transition-colors"},null,512),[[p,u.value]])])):B("",!0),r("button",R,i(o.value?"Continuar":"Acceder"),1)],32),r("div",$,[N(d,{to:"/",class:"inline-flex items-center text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors"},{default:T(()=>[...e[4]||(e[4]=[r("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),q(" Volver al inicio ",-1)])]),_:1})])])])}}}),Q=z(F,[["__scopeId","data-v-1380b115"]]);export{Q as default};
