import{e as D,r as m,A,E as Q,B as q,z as h,G as E,H as w,I as N,y as T,T as V,g as z,j as B,c as g,a as e,k as F,d as S,q as M,v as k,x as v,F as $,l as j,p as G,o as x,t as p}from"./CyYbDFE6.js";const U=()=>{const{$db:l}=D(),d=m([]),y=m(!0),u=async()=>{try{const a=await q(h(l,"quotations"));d.value=a.docs.map(s=>{const i=s.data();return{id:s.id,name:i.name,phone:i.phone,comment:i.comment,createdAt:i.createdAt.toDate()}})}catch(a){console.error("Error loading quotations:",a)}finally{y.value=!1}};A(u);const f=async a=>{await T(h(l,"quotations"),{...a,createdAt:V.now()}),await u()},c=async(a,s)=>{await N(w(l,"quotations",a),s),await u()},r=async a=>{await E(w(l,"quotations",a)),d.value=d.value.filter(s=>s.id!==a)};return{quotations:Q(d),addQuotation:f,updateQuotation:c,deleteQuotation:r}},H={class:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8"},L={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},I={class:"mb-8"},J={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},K={class:"mt-4 sm:mt-0"},O={key:0,class:"mt-6 p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700"},P={class:"bg-white dark:bg-gray-800 shadow overflow-hidden sm:rounded-md"},R={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},W={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},X={class:"px-6 py-4 whitespace-nowrap"},Y={class:"text-sm font-medium text-gray-900 dark:text-white"},Z={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},ee={class:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400 max-w-xs truncate"},te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},ae={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},oe=["onClick"],re=["onClick"],ne=z({__name:"quotations",setup(l){const{quotations:d,addQuotation:y,updateQuotation:u,deleteQuotation:f}=U(),c=m(!1),r=m(null);B(()=>!!r.value);const a=m({name:"",phone:"",comment:""}),s=n=>{r.value=n,a.value={name:n.name,phone:n.phone,comment:n.comment}},i=n=>{confirm("¿Estás seguro de que quieres eliminar esta cotización?")&&f(n)},_=()=>{r.value?u(r.value.id,a.value):y(a.value),b()},b=()=>{c.value=!1,r.value=null,a.value={name:"",phone:"",comment:""}};return(n,t)=>(x(),g("div",H,[e("div",L,[e("div",I,[e("div",J,[t[5]||(t[5]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"Gestión de Cotizaciones"),e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," Administra las solicitudes de cotización ")],-1)),e("div",K,[e("button",{onClick:t[0]||(t[0]=o=>c.value=!0),class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500"},[...t[4]||(t[4]=[e("svg",{class:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),S(" Nueva Cotización ",-1)])])])]),c.value||r.value?(x(),g("div",O,[e("form",{onSubmit:M(_,["prevent"]),class:"space-y-4"},[e("div",null,[t[6]||(t[6]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Nombre ",-1)),k(e("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=o=>a.value.name=o),type:"text",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500 dark:bg-gray-700 dark:text-white"},null,512),[[v,a.value.name]])]),e("div",null,[t[7]||(t[7]=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Teléfono ",-1)),k(e("input",{id:"phone","onUpdate:modelValue":t[2]||(t[2]=o=>a.value.phone=o),type:"tel",required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500 dark:bg-gray-700 dark:text-white"},null,512),[[v,a.value.phone]])]),e("div",null,[t[8]||(t[8]=e("label",{for:"comment",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Comentario ",-1)),k(e("textarea",{id:"comment","onUpdate:modelValue":t[3]||(t[3]=o=>a.value.comment=o),required:"",rows:"3",class:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500 dark:bg-gray-700 dark:text-white"},null,512),[[v,a.value.comment]])]),e("div",{class:"flex gap-2"},[t[9]||(t[9]=e("button",{type:"submit",class:"px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-md"},"Guardar",-1)),e("button",{type:"button",onClick:b,class:"px-4 py-2 bg-gray-300 hover:bg-gray-400 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-300 rounded-md"},"Cancelar")])],32)])):F("",!0)]),e("div",P,[e("table",R,[t[10]||(t[10]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Nombre"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Teléfono"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Comentario"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Fecha"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Acciones")])],-1)),e("tbody",W,[(x(!0),g($,null,j(G(d),o=>(x(),g("tr",{key:o.id},[e("td",X,[e("div",Y,p(o.name),1)]),e("td",Z,p(o.phone),1),e("td",ee,p(o.comment),1),e("td",te,p(new Date(o.createdAt).toLocaleDateString()),1),e("td",ae,[e("button",{onClick:C=>s(o),class:"text-orange-600 hover:text-orange-900 dark:text-orange-400 dark:hover:text-orange-300 mr-4"}," Editar ",8,oe),e("button",{onClick:C=>i(o.id),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"}," Eliminar ",8,re)])]))),128))])])])])]))}});export{ne as default};
