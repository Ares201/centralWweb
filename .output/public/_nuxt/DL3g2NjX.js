import{e as A,r as c,A as P,j as g,D as S,B as V,z as v,H as d,G as i,E as C,T as p,y as x}from"./BlC0kOmC.js";import{c as M}from"./ChZAjdJc.js";const H=()=>{const{$db:s}=A(),a=c([]),m=c(!0),r=async()=>{try{const e=await V(v(s,"projects"));a.value=e.docs.map(o=>{const t=o.data();return{id:o.id,title:t.title,description:t.description,type:t.type,status:t.status,downloadLink:t.downloadLink,imageUrl:t.imageUrl,views:t.views||0,viewsTiktok:t.viewsTiktok||0,downloads:t.downloads||0,tiktokLink:t.tiktokLink,difficulty:t.difficulty,estimatedTime:t.estimatedTime,documentationLink:t.documentationLink,demoLink:t.demoLink,createdAt:t.createdAt.toDate(),updatedAt:t.updatedAt.toDate()}})}catch(e){console.error("Error loading projects:",e)}finally{m.value=!1}};P(r);const l=c(""),u=c("all"),w=c("all"),y=g(()=>a.value.filter(e=>{const o=e.title.toLowerCase().includes(l.value.toLowerCase())||e.description.toLowerCase().includes(l.value.toLowerCase()),t=u.value==="all"||e.type===u.value,n=w.value==="all"||e.status===w.value;return o&&t&&n})),f=async e=>{await x(v(s,"projects"),{...e,dowload:0,viewsTiktok:0,createdAt:p.now(),updatedAt:p.now()}),await r()},k=async(e,o)=>{await d(i(s,"projects",e),{...o,updatedAt:p.now()}),await r()},j=async e=>{await C(i(s,"projects",e)),a.value=a.value.filter(o=>o.id!==e)},L=(e,o)=>k(e,{status:o}),T=async e=>{const o=a.value.find(n=>n.id===e);if(!o)return;const t=o.views+1;await d(i(s,"projects",e),{views:t}),o.views=t},h=async e=>{const o=a.value.find(n=>n.id===e);if(!o)return;const t=o.viewsTiktok+1;await d(i(s,"projects",e),{viewsTiktok:t}),o.viewsTiktok=t},D=async e=>{const o=a.value.find(n=>n.id===e);if(!o)return;const t=(o.downloads||0)+1;await d(i(s,"projects",e),{downloads:t}),o.downloads=t};return{projects:S(a),filteredProjects:y,searchQuery:l,selectedType:u,selectedStatus:w,addProject:f,updateProject:k,deleteProject:j,updateProjectStatus:L,incrementViews:T,incrementViewsTiktok:h,incrementDownloads:D}};const U=M("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);export{U as D,H as u};
