import{e as z,Q as I,R,S as x,r as E,U as b,L as O,V as C,W as D,X as U}from"./BlC0kOmC.js";const N="$s";function X(...t){const i=typeof t[t.length-1]=="string"?t.pop():void 0;typeof t[0]!="string"&&t.unshift(i);const[e,r]=t;if(!e||typeof e!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+e);if(r!==void 0&&typeof r!="function")throw new Error("[nuxt] [useState] init must be a function: "+r);const o=N+e,s=z(),n=I(s.payload.state,o);if(n.value===void 0&&r){const a=r();if(R(a))return s.payload.state[o]=a,a;n.value=a}return n}function M(t,i){if(typeof t!="string")throw new TypeError("argument str must be a string");const e={},r=i||{},o=r.decode||B;let s=0;for(;s<t.length;){const n=t.indexOf("=",s);if(n===-1)break;let a=t.indexOf(";",s);if(a===-1)a=t.length;else if(a<n){s=t.lastIndexOf(";",n-1)+1;continue}const c=t.slice(s,n).trim();if(r?.filter&&!r?.filter(c)){s=a+1;continue}if(e[c]===void 0){let u=t.slice(n+1,a).trim();u.codePointAt(0)===34&&(u=u.slice(1,-1)),e[c]=L(u,o)}s=a+1}return e}function B(t){return t.includes("%")?decodeURIComponent(t):t}function L(t,i){try{return i(t)}catch{return t}}const g=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function v(t,i,e){const r=e||{},o=r.encode||encodeURIComponent;if(typeof o!="function")throw new TypeError("option encode is invalid");if(!g.test(t))throw new TypeError("argument name is invalid");const s=o(i);if(s&&!g.test(s))throw new TypeError("argument val is invalid");let n=t+"="+s;if(r.maxAge!==void 0&&r.maxAge!==null){const a=r.maxAge-0;if(Number.isNaN(a)||!Number.isFinite(a))throw new TypeError("option maxAge is invalid");n+="; Max-Age="+Math.floor(a)}if(r.domain){if(!g.test(r.domain))throw new TypeError("option domain is invalid");n+="; Domain="+r.domain}if(r.path){if(!g.test(r.path))throw new TypeError("option path is invalid");n+="; Path="+r.path}if(r.expires){if(!P(r.expires)||Number.isNaN(r.expires.valueOf()))throw new TypeError("option expires is invalid");n+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(n+="; HttpOnly"),r.secure&&(n+="; Secure"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():r.priority){case"low":{n+="; Priority=Low";break}case"medium":{n+="; Priority=Medium";break}case"high":{n+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:{n+="; SameSite=Strict";break}case"lax":{n+="; SameSite=Lax";break}case"strict":{n+="; SameSite=Strict";break}case"none":{n+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(n+="; Partitioned"),n}function P(t){return Object.prototype.toString.call(t)==="[object Date]"||t instanceof Date}function A(t){return typeof t=="string"?`'${t}'`:new _().serialize(t)}const _=(function(){class t{#e=new Map;compare(e,r){const o=typeof e,s=typeof r;return o==="string"&&s==="string"?e.localeCompare(r):o==="number"&&s==="number"?e-r:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(r,!0))}serialize(e,r){if(e===null)return"null";switch(typeof e){case"string":return r?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const r=Object.prototype.toString.call(e);if(r!=="[object Object]")return this.serializeBuiltInType(r.length<10?`unknown:${r}`:r.slice(8,-1),e);const o=e.constructor,s=o===Object||o===void 0?"":o.name;if(s!==""&&globalThis[s]===o)return this.serializeBuiltInType(s,e);if(typeof e.toJSON=="function"){const n=e.toJSON();return s+(n!==null&&typeof n=="object"?this.$object(n):`(${this.serialize(n)})`)}return this.serializeObjectEntries(s,Object.entries(e))}serializeBuiltInType(e,r){const o=this["$"+e];if(o)return o.call(this,r);if(typeof r?.entries=="function")return this.serializeObjectEntries(e,r.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,r){const o=Array.from(r).sort((n,a)=>this.compare(n[0],a[0]));let s=`${e}{`;for(let n=0;n<o.length;n++){const[a,c]=o[n];s+=`${this.serialize(a,!0)}:${this.serialize(c)}`,n<o.length-1&&(s+=",")}return s+"}"}$object(e){let r=this.#e.get(e);return r===void 0&&(this.#e.set(e,`#${this.#e.size}`),r=this.serializeObject(e),this.#e.set(e,r)),r}$function(e){const r=Function.prototype.toString.call(e);return r.slice(-15)==="[native code] }"?`${e.name||""}()[native]`:`${e.name}(${e.length})${r.replace(/\s*\n\s*/g,"")}`}$Array(e){let r="[";for(let o=0;o<e.length;o++)r+=this.serialize(e[o]),o<e.length-1&&(r+=",");return r+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort((r,o)=>this.compare(r,o)))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}for(const i of["Error","RegExp","URL"])t.prototype["$"+i]=function(e){return`${i}(${e})`};for(const i of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])t.prototype["$"+i]=function(e){return`${i}[${e.join(",")}]`};for(const i of["BigInt64Array","BigUint64Array"])t.prototype["$"+i]=function(e){return`${i}[${e.join("n,")}${e.length>0?"n":""}]`};return t})();function F(t,i){return t===i||A(t)===A(i)}function l(t){if(typeof t!="object")return t;var i,e,r=Object.prototype.toString.call(t);if(r==="[object Object]"){if(t.constructor!==Object&&typeof t.constructor=="function"){e=new t.constructor;for(i in t)t.hasOwnProperty(i)&&e[i]!==t[i]&&(e[i]=l(t[i]))}else{e={};for(i in t)i==="__proto__"?Object.defineProperty(e,i,{value:l(t[i]),configurable:!0,enumerable:!0,writable:!0}):e[i]=l(t[i])}return e}if(r==="[object Array]"){for(i=t.length,e=Array(i);i--;)e[i]=l(t[i]);return e}return r==="[object Set]"?(e=new Set,t.forEach(function(o){e.add(l(o))}),e):r==="[object Map]"?(e=new Map,t.forEach(function(o,s){e.set(l(s),l(o))}),e):r==="[object Date]"?new Date(+t):r==="[object RegExp]"?(e=new RegExp(t.source,t.flags),e.lastIndex=t.lastIndex,e):r==="[object DataView]"?new t.constructor(l(t.buffer)):r==="[object ArrayBuffer]"?t.slice(0):r.slice(-6)==="Array]"?new t.constructor(t):t}const V={path:"/",watch:!0,decode:t=>x(decodeURIComponent(t)),encode:t=>encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))},m=globalThis.cookieStore;function Q(t,i){const e={...V,...i};e.filter??=u=>u===t;const r=j(e)||{};let o;e.maxAge!==void 0?o=e.maxAge*1e3:e.expires&&(o=e.expires.getTime()-Date.now());const s=o!==void 0&&o<=0,n=s||r[t]===void 0||r[t]===null,a=l(s?void 0:r[t]??e.default?.()),c=o&&!s?q(a,o,e.watch&&e.watch!=="shallow"):E(a);{let u=null;try{!m&&typeof BroadcastChannel<"u"&&(u=new BroadcastChannel(`nuxt:cookies:${t}`))}catch{}const p=(f=!1)=>{!f&&(e.readonly||F(c.value,r[t]))||(J(t,c.value,e),r[t]=l(c.value),u?.postMessage({value:e.encode(c.value)}))},d=f=>{const h=f.refresh?j(e)?.[t]:e.decode(f.value);y=!0,c.value=h,r[t]=l(h),U(()=>{y=!1})};let y=!1;const S=!!C();if(S&&b(()=>{y=!0,p(),u?.close()}),m){const f=h=>{const $=h.changed.find(w=>w.name===t),T=h.deleted.find(w=>w.name===t);$&&d({value:$.value}),T&&d({value:null})};m.addEventListener("change",f),S&&b(()=>m.removeEventListener("change",f))}else u&&(u.onmessage=({data:f})=>d(f));e.watch&&O(c,()=>{y||p()},{deep:e.watch!=="shallow"}),n&&p(n)}return c}function j(t={}){return M(document.cookie,t)}function H(t,i,e={}){return i==null?v(t,i,{...e,maxAge:-1}):v(t,i,e)}function J(t,i,e={}){document.cookie=H(t,i,e)}const k=2147483647;function q(t,i,e){let r,o,s=0;const n=e?E(t):{value:t};return C()&&b(()=>{o?.(),clearTimeout(r)}),D((a,c)=>{e&&(o=O(n,c));function u(){s=0,clearTimeout(r);const p=i-s,d=p<k?p:k;r=setTimeout(()=>{if(s+=d,s<i)return u();n.value=void 0,c()},d)}return{get(){return a(),n.value},set(p){u(),n.value=p,c()}}})}export{Q as a,X as u};
